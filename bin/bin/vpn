#!/bin/bash

vpn_conf=vpn

case "$1" in
     --start|--stop|--restart)
          if [[ $(id -u) != 0 ]]; then
               printf "$(tput setaf 1)Error:$(tput sgr0) This script must be run as root\n"
               exit 1
          else
               systemctl ${1//--} openvpn-client@$vpn_conf.service
          fi
          ;;
     --status)
          if [[ $(ip addr show dev tun0 2>/dev/null) ]]; then
               printf "$(tput setaf 2)The VPN connection is active$(tput sgr0)\n"
          else
               printf "$(tput setaf 1)The VPN connection is inactive$(tput sgr0)\n"
          fi
          ;;
     *)
          echo "usage: vpn [--start] [--stop] [--restart] [--status]" && exit 1
          ;;
esac
